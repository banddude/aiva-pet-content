{
  "id": "valentines",
  "version": 4,
  "name": "Valentine's Day",
  "expression": "love",
  "js": "(function(){ if (window._valentinesLoaded) return; window._valentinesLoaded = true; var _=null,P='P',W='W',D='D'; var loveGrid = [[_,_,_,_,_,P,P,_,_,_,_,P,P,_,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,P,P,P,P,P,P,P,P,P,P,P,P,_,_,_],[_,_,P,P,W,W,W,W,W,W,W,W,W,W,P,P,_,_],[_,_,P,W,W,W,W,W,W,W,W,W,W,W,W,P,_,_],[_,_,P,W,D,W,D,W,W,W,D,W,D,W,W,P,_,_],[_,_,P,W,W,D,W,W,W,W,W,D,W,W,W,P,_,_],[_,_,P,W,W,W,W,P,W,W,P,W,W,W,W,P,_,_],[_,_,P,W,W,W,W,W,P,P,W,W,W,W,W,P,_,_],[_,_,P,P,W,W,W,W,W,W,W,W,W,W,P,P,_,_],[_,_,_,P,P,P,P,P,P,P,P,P,P,P,P,_,_,_],[_,_,_,_,P,P,_,_,_,_,_,_,P,P,_,_,_,_]]; spriteCache['love'] = renderSprite(loveGrid, false); spriteCache['love_flip'] = renderSprite(loveGrid, true); expressionKeys['Digit8'] = 'love'; if (!window._contentBehaviors) window._contentBehaviors = []; window._contentBehaviors.push({ action: 'love', cat: 'expression', w: 6 }); if (!window._contentActions) window._contentActions = {}; window._contentActions['love'] = function(b) { b.expression = 'love'; b.expressionTimer = 1.5 + Math.random() * 1.5; b.lastAutoCategory = 'expression'; }; if (!window._contentOverlays) window._contentOverlays = []; var heartCanvas = null; function buildHeart(px) { var H = '#ff4477'; var sprite = [[0,H,H,0,H,H,0],[H,H,H,H,H,H,H],[H,H,H,H,H,H,H],[0,H,H,H,H,H,0],[0,0,H,H,H,0,0],[0,0,0,H,0,0,0]]; var c = document.createElement('canvas'); c.width = 7 * px; c.height = 6 * px; var x = c.getContext('2d'); for (var r = 0; r < 6; r++) for (var cl = 0; cl < 7; cl++) { if (sprite[r][cl]) { x.fillStyle = sprite[r][cl]; x.fillRect(cl * px, r * px, px, px); } } return c; } window._contentOverlays.push(function(ctx, b, bx, by, px, colors, gt) { if (b.expression !== 'love') return; if (!heartCanvas) heartCanvas = buildHeart(px); var sw = 18 * px; var cx = bx + sw / 2; var baseY = by - heartCanvas.height - px; var bobY = baseY - Math.abs(Math.sin(gt * 4)) * 12; ctx.drawImage(heartCanvas, Math.round(cx - heartCanvas.width / 2), Math.round(bobY)); }); console.log('[AIVA Content] Valentine pack v4 loaded'); })()"
}
