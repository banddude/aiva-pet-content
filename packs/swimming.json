{
  "id": "swimming",
  "version": 1,
  "name": "Swimming",
  "greeting": "Splish splash!",
  "js": "(function(){if(window._swimLoaded)return;window._swimLoaded=true;var PX=typeof window.PX_SIZE!=='undefined'?window.PX_SIZE:(window.DESKTOP_PET?4:8);var _=null,P='P',W='W',D='D';var swimHappy=[[_,_,_,_,_,P,P,_,_,_,_,P,P,_,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,_,P,P,P,P,_,_,P,P,P,P,_,_,_,_],[_,_,_,P,P,P,P,P,P,P,P,P,P,P,P,_,_,_],[_,_,P,P,W,W,W,W,W,W,W,W,W,W,P,P,_,_],[_,_,P,W,W,W,W,W,W,W,W,W,W,W,W,P,_,_],[_,_,P,W,W,D,D,W,W,W,W,D,D,W,W,P,_,_],[_,_,P,W,W,W,W,W,W,W,W,W,W,W,W,P,_,_],[_,_,P,W,W,W,W,P,W,W,P,W,W,W,W,P,_,_],[_,_,P,W,W,W,W,W,P,P,W,W,W,W,W,P,_,_],[_,_,P,P,W,W,W,W,W,W,W,W,W,W,P,P,_,_],[_,_,_,P,P,P,P,P,P,P,P,P,P,P,P,_,_,_],[_,_,_,_,P,P,_,_,_,_,_,_,P,P,_,_,_,_]];spriteCache['swim_happy']=renderSprite(swimHappy,false);spriteCache['swim_happy_flip']=renderSprite(swimHappy,true);var floatCanvas=null;function buildFloat(px){var Y='#ffcc00',O='#ff9900';var grid=[[0,0,0,Y,Y,Y,Y,Y,Y,0,0,0],[0,Y,Y,O,Y,Y,Y,Y,O,Y,Y,0],[Y,O,Y,Y,0,0,0,0,Y,Y,O,Y],[Y,O,Y,Y,0,0,0,0,Y,Y,O,Y],[0,Y,Y,O,Y,Y,Y,Y,O,Y,Y,0],[0,0,0,Y,Y,Y,Y,Y,Y,0,0,0]];var c=document.createElement('canvas');c.width=12*px;c.height=6*px;var x=c.getContext('2d');for(var r=0;r<grid.length;r++)for(var cl=0;cl<grid[r].length;cl++){if(grid[r][cl]){x.fillStyle=grid[r][cl];x.fillRect(cl*px,r*px,px,px)}}return c}var swimState={active:false,timer:0,duration:0,bobPhase:0,groundY:0,particles:[],lastGt:0};function spawnSplash(cx,wy,n,pow){for(var i=0;i<n;i++)swimState.particles.push({x:cx+(Math.random()-0.5)*18*PX,y:wy,vx:(Math.random()-0.5)*pow*0.7,vy:-Math.random()*pow,life:0.6+Math.random()*0.5,size:Math.random()>0.5?PX:PX*0.6})}if(!window._contentBehaviors)window._contentBehaviors=[];window._contentBehaviors.push({action:'swim',cat:'toggle',w:3});if(!window._contentActions)window._contentActions={};window._contentActions['swim']=function(b){if(swimState.active){swimState.active=false;return}swimState.active=true;swimState.timer=0;swimState.duration=10+Math.random()*10;swimState.bobPhase=0;swimState.groundY=b.y;swimState.particles=[];swimState.lastGt=0;if(b.hasSkateboard&&typeof toggleSkateboard==='function')toggleSkateboard();spawnSplash(b.x,b.y-6*PX,15,7);b.expression='swim_happy';b.expressionTimer=2;b.lastAutoCategory='toggle'};if(!window._contentOverlays)window._contentOverlays=[];window._contentOverlays.push(function(ctx,b,bx,by,px,colors,gt){if(!swimState.active)return;var dt=swimState.lastGt?Math.min(gt-swimState.lastGt,0.05):0.016;if(dt<0)dt=0.016;swimState.lastGt=gt;swimState.timer+=dt;if(swimState.timer>swimState.duration){swimState.active=false;return}swimState.bobPhase+=dt*2.5;var bob=Math.sin(swimState.bobPhase)*2*px;var waterY=swimState.groundY-6*px+bob;var cw=ctx.canvas.width;var ch=ctx.canvas.height;for(var wx=0;wx<cw;wx+=px){var wave=Math.sin((wx+gt*40)*0.02)*px*0.4;ctx.fillStyle='rgba(68,170,238,0.7)';ctx.fillRect(wx,waterY+wave,px,px)}ctx.fillStyle='rgba(34,119,204,0.55)';ctx.fillRect(0,waterY+px,cw,ch-waterY);ctx.fillStyle='rgba(17,85,170,0.25)';ctx.fillRect(0,waterY+px*3,cw,ch-waterY);if(!floatCanvas)floatCanvas=buildFloat(px);var sw=18*px;var fx=Math.floor(bx+sw/2-floatCanvas.width/2);var fy=Math.floor(waterY-floatCanvas.height/2);ctx.drawImage(floatCanvas,fx,fy);for(var i=swimState.particles.length-1;i>=0;i--){var p=swimState.particles[i];p.vy+=12*dt;p.x+=p.vx;p.y+=p.vy;p.life-=dt;if(p.life<=0){swimState.particles.splice(i,1);continue}ctx.globalAlpha=Math.max(0,p.life);ctx.fillStyle='#aaddff';ctx.fillRect(p.x,p.y,p.size,p.size)}ctx.globalAlpha=1;if(swimState.timer>swimState.duration-0.5&&swimState.particles.length===0){spawnSplash(b.x,waterY,12,6)}});console.log('[AIVA Content] Swimming pack v1 loaded')})()"
}
