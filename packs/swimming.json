{"id": "swimming", "version": 2, "name": "Swimming", "greeting": "Splish splash!", "js": "(function(){if(!window._swimLoaded){window._swimLoaded=!0;var t=void 0!==window.PX_SIZE?window.PX_SIZE:window.DESKTOP_PET?4:8,a=null,o=\"P\",e=\"W\",i=\"D\",l=[[a,a,a,a,o,o,a,a,a,a,o,o,a,a,a,a,a,a],[a,a,a,a,o,o,o,o,a,a,o,o,o,o,a,a,a,a],[a,a,a,a,o,o,o,o,a,a,o,o,o,o,a,a,a,a],[a,a,a,a,o,o,o,o,a,a,o,o,o,o,a,a,a,a],[a,a,a,a,o,o,o,o,a,a,o,o,o,o,a,a,a,a],[a,a,a,o,o,o,o,o,o,o,o,o,o,o,o,a,a,a],[a,a,o,o,e,e,e,e,e,e,e,e,e,e,o,o,a,a],[a,a,o,e,e,e,e,e,e,e,e,e,e,e,e,o,a,a],[a,a,o,e,e,i,i,e,e,e,e,i,i,e,e,o,a,a],[a,a,o,e,e,e,e,e,e,e,e,e,e,e,e,o,a,a],[a,a,o,e,e,e,e,o,e,e,o,e,e,e,e,o,a,a],[a,a,o,e,e,e,e,e,o,o,e,e,e,e,e,o,a,a],[a,a,o,o,e,e,e,e,e,e,e,e,e,e,o,o,a,a],[a,a,a,o,o,o,o,o,o,o,o,o,o,o,o,a,a,a],[a,a,a,a,o,o,a,a,a,a,a,a,o,o,a,a,a,a]];spriteCache.swim_happy=renderSprite(l,!1),spriteCache.swim_happy_flip=renderSprite(l,!0);var r=null,n={active:!1,timer:0,duration:0,bobPhase:0,groundY:0,particles:[],lastGt:0,floatX:0,floatVx:0,floatDriftTimer:0,floatDriftInterval:0,floatBobPhase:0};window._contentBehaviors||(window._contentBehaviors=[]),window._contentBehaviors.push({action:\"swim\",cat:\"toggle\",w:3}),window._contentActions||(window._contentActions={}),window._contentActions.swim=function(a){n.active?n.active=!1:(n.active=!0,n.timer=0,n.duration=10+10*Math.random(),n.bobPhase=0,n.groundY=a.y,n.particles=[],n.lastGt=0,n.floatX=a.x+(Math.random()>.5?1:-1)*(60+80*Math.random()),n.floatVx=.6*(Math.random()-.5),n.floatDriftTimer=0,n.floatDriftInterval=2+3*Math.random(),n.floatBobPhase=Math.random()*Math.PI*2,a.hasSkateboard&&\"function\"==typeof toggleSkateboard&&toggleSkateboard(),f(a.x,a.y-6*t,15,7),a.expression=\"swim_happy\",a.expressionTimer=2,a.lastAutoCategory=\"toggle\")},window._contentOverlays||(window._contentOverlays=[]),window._contentOverlays.push(function(t,a,o,e,i,l,s){if(n.active){var h=n.lastGt?Math.min(s-n.lastGt,.05):.016;if(h<0&&(h=.016),n.lastGt=s,n.timer+=h,n.timer>n.duration)n.active=!1;else{n.bobPhase+=2.5*h;var d=2*Math.sin(n.bobPhase)*i,c=n.groundY-6*i+d,v=t.canvas.width,w=t.canvas.height;n.floatDriftTimer+=h,n.floatBobPhase+=1.8*h,n.floatDriftTimer>n.floatDriftInterval&&(n.floatDriftTimer=0,n.floatDriftInterval=1.5+3*Math.random(),n.floatVx=1.2*(Math.random()-.5));var m=n.floatX-a.x,p=Math.abs(m);if(p<40*i){var x=m>0?1:-1,g=2.5*(1-p/(40*i));n.floatVx+=x*g*h*60,p<25*i&&Math.random()<.05&&f(a.x+(m>0?10*i:-10*i),c,3,3)}n.floatVx*=.995,n.floatVx>2&&(n.floatVx=2),n.floatVx<-2&&(n.floatVx=-2),n.floatX+=n.floatVx;var M=20*i;n.floatX<M&&(n.floatX=M,n.floatVx=.5*Math.abs(n.floatVx)+.3),n.floatX>v-M&&(n.floatX=v-M,n.floatVx=.5*-Math.abs(n.floatVx)-.3);var b=.8*i;p>20*i&&(a.x+=(m>0?b:-b)*h*60),a.facingRight=m>0,a.expression=\"swim_happy\",a.expressionTimer=2;for(var y=0;y<v;y+=i){var u=Math.sin(.02*(y+40*s))*i*.4;t.fillStyle=\"rgba(68,170,238,0.7)\",t.fillRect(y,c+u,i,i)}t.fillStyle=\"rgba(34,119,204,0.55)\",t.fillRect(0,c+i,v,w-c),t.fillStyle=\"rgba(17,85,170,0.25)\",t.fillRect(0,c+3*i,v,w-c),r||(r=function(t){var a=\"#ffcc00\",o=\"#ff9900\",e=[[0,0,0,a,a,a,a,a,a,0,0,0],[0,a,a,o,a,a,a,a,o,a,a,0],[a,o,a,a,0,0,0,0,a,a,o,a],[a,o,a,a,0,0,0,0,a,a,o,a],[0,a,a,o,a,a,a,a,o,a,a,0],[0,0,0,a,a,a,a,a,a,0,0,0]],i=document.createElement(\"canvas\");i.width=12*t,i.height=6*t;for(var l=i.getContext(\"2d\"),r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)e[r][n]&&(l.fillStyle=e[r][n],l.fillRect(n*t,r*t,t,t));return i}(i));var _=1.5*Math.sin(n.floatBobPhase)*i,V=Math.floor(n.floatX-r.width/2),P=Math.floor(c+_-r.height/2);t.drawImage(r,V,P);for(var S=n.particles.length-1;S>=0;S--){var D=n.particles[S];D.vy+=12*h,D.x+=D.vx,D.y+=D.vy,D.life-=h,D.life<=0?n.particles.splice(S,1):(t.globalAlpha=Math.max(0,D.life),t.fillStyle=\"#aaddff\",t.fillRect(D.x,D.y,D.size,D.size))}t.globalAlpha=1,n.timer>n.duration-.5&&0===n.particles.length&&f(a.x,c,12,6)}}}),console.log(\"[AIVA Content] Swimming pack v2 loaded\")}function f(a,o,e,i){for(var l=0;l<e;l++)n.particles.push({x:a+18*(Math.random()-.5)*t,y:o,vx:(Math.random()-.5)*i*.7,vy:-Math.random()*i,life:.6+.5*Math.random(),size:Math.random()>.5?t:.6*t})}})();"}
